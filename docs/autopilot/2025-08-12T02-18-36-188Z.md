```markdown
# Integration Plan for Gmail OAuth and Unread Count

## Overview
This document outlines a minimal plan to integrate Gmail OAuth for user authentication and to retrieve the unread email count from the user's Gmail account. The integration will enhance user experience by allowing secure access to their email data.

## Steps to Implement

### 1. Set Up Google Cloud Project
- Create a new project in the [Google Cloud Console](https://console.cloud.google.com/).
- Enable the Gmail API for the project.
- Create OAuth 2.0 credentials:
  - Navigate to "APIs & Services" > "Credentials".
  - Click on "Create Credentials" and select "OAuth client ID".
  - Configure the consent screen and set the application type to "Web application".

### 2. Install Required Libraries
Ensure you have the necessary libraries installed. For a Node.js application, you can use the following command:

```bash
npm install googleapis
```

### 3. Implement OAuth Flow
Create a new file `oauth.js` under `docs/autopilot/` to handle the OAuth flow.

```javascript
const { google } = require('googleapis');

const oauth2Client = new google.auth.OAuth2(
  YOUR_CLIENT_ID,
  YOUR_CLIENT_SECRET,
  YOUR_REDIRECT_URL
);

// Generate the URL for consent
const authUrl = oauth2Client.generateAuthUrl({
  access_type: 'offline',
  scope: ['https://www.googleapis.com/auth/gmail.readonly'],
});

// Redirect user to authUrl to get authorization
console.log('Authorize this app by visiting this url:', authUrl);
```

### 4. Retrieve Unread Count
Once the user has authenticated, you can retrieve the unread email count using the following code snippet:

```javascript
async function getUnreadCount(auth) {
  const gmail = google.gmail({ version: 'v1', auth });
  const res = await gmail.users.messages.list({
    userId: 'me',
    q: 'is:unread',
  });
  return res.data.resultSizeEstimate;
}
```

### 5. Testing
- Test the OAuth flow by running the application and visiting the generated URL.
- After authentication, call the `getUnreadCount` function to verify that it returns the correct unread email count.

## Conclusion
This plan provides a structured approach to integrating Gmail OAuth and retrieving the unread email count. The next steps involve implementing the above code snippets and testing the functionality thoroughly.
```
